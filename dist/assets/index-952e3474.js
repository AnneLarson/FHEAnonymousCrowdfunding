import{r as d,a as X}from"./vendor-30840fde.js";import{c as ee,p as h,f as W,s as E,h as te,a as M,b as L}from"./wagmi-54669bf6.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function p(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=p(r);fetch(r.href,s)}})();var $={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=d,re=Symbol.for("react.element"),ae=Symbol.for("react.fragment"),ie=Object.prototype.hasOwnProperty,oe=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,se={key:!0,ref:!0,__self:!0,__source:!0};function q(n,a,p){var o,r={},s=null,i=null;p!==void 0&&(s=""+p),a.key!==void 0&&(s=""+a.key),a.ref!==void 0&&(i=a.ref);for(o in a)ie.call(a,o)&&!se.hasOwnProperty(o)&&(r[o]=a[o]);if(n&&n.defaultProps)for(o in a=n.defaultProps,a)r[o]===void 0&&(r[o]=a[o]);return{$$typeof:re,type:n,key:s,ref:i,props:r,_owner:oe.current}}T.Fragment=ae;T.jsx=q;T.jsxs=q;$.exports=T;var e=$.exports,A={},O=X;A.createRoot=O.createRoot,A.hydrateRoot=O.hydrateRoot;const v=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"campaignId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"title",type:"string"},{indexed:!1,internalType:"uint256",name:"target",type:"uint256"}],name:"CampaignCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"campaignId",type:"uint256"},{indexed:!0,internalType:"address",name:"contributor",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ContributionMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"campaignId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"FundsWithdrawn",type:"event"},{inputs:[{internalType:"string",name:"_title",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"uint256",name:"_target",type:"uint256"},{internalType:"uint256",name:"_deadline",type:"uint256"}],name:"createCampaign",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"},{internalType:"bytes32",name:"encryptedAmount",type:"bytes32"}],name:"contribute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"withdrawFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"getCampaign",outputs:[{components:[{internalType:"address",name:"creator",type:"address"},{internalType:"string",name:"title",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"uint256",name:"target",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountCollected",type:"uint256"},{internalType:"bool",name:"withdrawn",type:"bool"}],internalType:"struct FHEAnonymousCrowdfunding.Campaign",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCampaignsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCampaigns",outputs:[{components:[{internalType:"address",name:"creator",type:"address"},{internalType:"string",name:"title",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"uint256",name:"target",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountCollected",type:"uint256"},{internalType:"bool",name:"withdrawn",type:"bool"}],internalType:"struct FHEAnonymousCrowdfunding.Campaign[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"}];let k=null;const U=async()=>{try{return console.log("🔐 Initializing FHE encryption system..."),k={initialized:!0,encrypt64:n=>J(n)},console.log("✅ FHE encryption system ready"),k}catch(n){throw console.error("Failed to initialize FHE:",n),n}},le=async n=>{try{k||await U(),console.log(`🔐 Encrypting donation amount: ${n} wei`);const a=J(n);return console.log("✅ Amount encrypted successfully"),a}catch(a){return console.error("Failed to encrypt amount:",a),"0x"+"0".repeat(64)}},J=n=>"0x"+n.toString().split("").reduce((o,r)=>(o<<5)-o+r.charCodeAt(0)>>>0,0).toString(16).padStart(8,"0").repeat(8).substring(0,64),j="0x5baB1e95C6Eba8e92CA8f5645A193167E79abD95";function de(){const[n,a]=d.useState(!1),[p,o]=d.useState(""),[r,s]=d.useState([]),[i,u]=d.useState(!1),[w,S]=d.useState("browse"),[m,B]=d.useState(""),[g,F]=d.useState(""),[y,_]=d.useState(""),[x,D]=d.useState(""),[b,I]=d.useState(""),P=ee({chain:E,transport:te()});d.useEffect(()=>{K(),C(),U().catch(console.error)},[]);const K=async()=>{if(typeof window.ethereum<"u")try{const t=await window.ethereum.request({method:"eth_accounts"});t.length>0&&(a(!0),o(t[0]))}catch(t){console.error("Error checking connection:",t)}},V=async()=>{if(typeof window.ethereum<"u")try{u(!0);const t=await window.ethereum.request({method:"eth_requestAccounts"});a(!0),o(t[0]),await C()}catch(t){console.error("Error connecting wallet:",t),alert("Failed to connect wallet. Please try again.")}finally{u(!1)}else alert("MetaMask is not installed. Please install MetaMask to use this dApp.")},C=async()=>{try{u(!0);const t=await P.readContract({address:j,abi:v,functionName:"getCampaignsCount"}),l=[];for(let c=0;c<Number(t);c++){const f=await P.readContract({address:j,abi:v,functionName:"getCampaign",args:[BigInt(c)]});l.push(f)}s(l)}catch(t){console.error("Error loading campaigns:",t),s([{creator:"0x1234...5678",title:"Help Build Clean Water Wells",description:"Supporting clean water access in rural communities with complete donor privacy.",target:h("10"),deadline:BigInt(Date.now()+30*24*60*60*1e3),amountCollected:h("3.5"),withdrawn:!1},{creator:"0x8765...4321",title:"Anonymous Medical Research Fund",description:"Private funding for critical medical research. All donations are completely anonymous.",target:h("25"),deadline:BigInt(Date.now()+45*24*60*60*1e3),amountCollected:h("18.2"),withdrawn:!1}])}finally{u(!1)}},Y=async()=>{if(!n||!m||!g||!y||!x){alert("Please fill in all fields and connect your wallet.");return}try{u(!0);const t=M({chain:E,transport:L(window.ethereum)}),l=h(y),c=BigInt(new Date(x).getTime()),f=await t.writeContract({address:j,abi:v,functionName:"createCampaign",args:[m,g,l,c],account:p});alert(`Campaign created! Transaction: ${f}`),B(""),F(""),_(""),D(""),S("browse"),await C()}catch(t){console.error("Error creating campaign:",t),alert("Failed to create campaign. Please try again.")}finally{u(!1)}},Z=async t=>{if(!n||!b){alert("Please connect your wallet and enter a donation amount.");return}try{u(!0);const l=M({chain:E,transport:L(window.ethereum)}),c=h(b),f=Number(c),G=await le(f),Q=await l.writeContract({address:j,abi:v,functionName:"contribute",args:[BigInt(t),G],account:p,value:c});alert(`Anonymous donation sent! Transaction: ${Q}`),I(""),await C()}catch(l){console.error("Error making donation:",l),alert("Failed to make donation. Please try again.")}finally{u(!1)}},H=t=>`${t.slice(0,6)}...${t.slice(-4)}`,z=t=>Number(t)<Date.now(),N=(t,l)=>Number(t*100n/l);return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontFamily:"Arial, sans-serif",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"30px",borderRadius:"10px",backdropFilter:"blur(10px)",marginBottom:"20px"},children:[e.jsx("h1",{style:{textAlign:"center",marginBottom:"20px",fontSize:"3rem",margin:"0 0 20px 0"},children:"🔒 FHE Anonymous Crowdfunding"}),e.jsx("div",{style:{textAlign:"center"},children:n?e.jsxs("div",{style:{background:"#4CAF50",padding:"15px",borderRadius:"8px",display:"inline-block"},children:["✅ Connected: ",H(p)]}):e.jsx("button",{onClick:V,disabled:i,style:{background:"#007bff",color:"white",border:"none",padding:"15px 30px",borderRadius:"8px",fontSize:"1.2rem",cursor:i?"not-allowed":"pointer",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",opacity:i?.7:1},children:i?"🔄 Connecting...":"🔗 Connect Wallet"})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>S("browse"),style:{background:w==="browse"?"#007bff":"transparent",color:"white",border:"2px solid #007bff",padding:"10px 20px",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"10px"},children:"🔍 Browse Campaigns"}),e.jsx("button",{onClick:()=>S("create"),style:{background:w==="create"?"#28a745":"transparent",color:"white",border:"2px solid #28a745",padding:"10px 20px",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:"➕ Create Campaign"})]}),w==="browse"&&e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"20px"},children:"🌟 Active Campaigns"}),i&&e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"🔄 Loading campaigns..."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"20px"},children:r.map((t,l)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"25px",borderRadius:"10px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",fontSize:"1.5rem"},children:t.title}),e.jsx("p",{style:{margin:"0 0 15px 0",opacity:.9},children:t.description}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Progress:"}),e.jsxs("span",{children:[N(t.amountCollected,t.target),"%"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"10px",height:"8px",overflow:"hidden"},children:e.jsx("div",{style:{background:"#4CAF50",height:"100%",width:`${Math.min(100,N(t.amountCollected,t.target))}%`,transition:"width 0.3s ease"}})})]}),e.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"15px",opacity:.8},children:[e.jsxs("div",{children:["💰 Raised: ",W(t.amountCollected)," ETH / ",W(t.target)," ETH"]}),e.jsxs("div",{children:["👤 Creator: ",H(t.creator)]}),e.jsxs("div",{children:["⏰ Deadline: ",new Date(Number(t.deadline)).toLocaleDateString()]}),e.jsxs("div",{children:["📊 Status: ",z(t.deadline)?"⏰ Ended":"✅ Active"]})]}),!z(t.deadline)&&e.jsxs("div",{style:{marginTop:"15px"},children:[e.jsx("input",{type:"number",placeholder:"Amount in ETH",value:b,onChange:c=>I(c.target.value),step:"0.01",min:"0",style:{width:"100%",padding:"10px",marginBottom:"10px",borderRadius:"5px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}}),e.jsx("button",{onClick:()=>Z(l),disabled:i||!b,style:{background:"#28a745",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"1rem",cursor:i?"not-allowed":"pointer",width:"100%",opacity:i||!b?.7:1},children:i?"🔄 Processing...":"🎁 Donate Anonymously"})]})]},l))}),r.length===0&&!i&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",background:"rgba(255,255,255,0.1)",borderRadius:"10px"},children:[e.jsx("h3",{children:"No campaigns found"}),e.jsx("p",{children:"Be the first to create an anonymous crowdfunding campaign!"})]})]}),w==="create"&&e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"30px",borderRadius:"10px",backdropFilter:"blur(10px)"},children:[e.jsx("h2",{style:{marginBottom:"25px"},children:"🚀 Create New Campaign"}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"📝 Campaign Title"}),e.jsx("input",{type:"text",value:m,onChange:t=>B(t.target.value),placeholder:"Enter campaign title",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"📄 Description"}),e.jsx("textarea",{value:g,onChange:t=>F(t.target.value),placeholder:"Describe your campaign and how funds will be used",rows:4,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"🎯 Target Amount (ETH)"}),e.jsx("input",{type:"number",value:y,onChange:t=>_(t.target.value),placeholder:"0.0",step:"0.01",min:"0",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"⏰ Deadline"}),e.jsx("input",{type:"date",value:x,onChange:t=>D(t.target.value),min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}})]})]}),e.jsx("button",{onClick:Y,disabled:i||!m||!g||!y||!x,style:{background:"#28a745",color:"white",border:"none",padding:"15px 30px",borderRadius:"8px",fontSize:"1.2rem",cursor:i||!m||!g||!y||!x?"not-allowed":"pointer",width:"100%",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",opacity:i||!m||!g||!y||!x?.7:1},children:i?"🔄 Creating Campaign...":"🚀 Launch Campaign"}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0,123,255,0.2)",borderRadius:"8px",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"🔐 Privacy Notice:"})," All donations to your campaign will be completely anonymous. Donor identities and amounts are protected using FHE encryption."]})]})]}),e.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",textAlign:"center",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:"🕐 Last Updated:"})," ",new Date().toLocaleString()]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:"🚀 Status:"})," ",n?"✅ Connected & Ready":"⏳ Waiting for Wallet Connection"]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("strong",{children:"🔧 Version:"})," v3.0 - Full Web3 Integration"]}),e.jsx("p",{style:{margin:0,opacity:.8},children:"Built with ❤️ using FHE, React, Web3, and Privacy-First Technology • Powered by Zama"})]})]})})}console.log("🚀 FHE Anonymous Crowdfunding - Starting application...");const R=document.getElementById("root");if(!R)console.error("❌ Root element not found!"),document.body.innerHTML="<h1>Error: Root element not found</h1>";else{console.log("✅ Root element found, rendering React app...");try{A.createRoot(R).render(e.jsx(de,{})),console.log("✅ React app rendered successfully!")}catch(n){console.error("❌ Error rendering React app:",n),R.innerHTML=`<h1>Error: ${n.message}</h1>`}}
//# sourceMappingURL=index-952e3474.js.map
