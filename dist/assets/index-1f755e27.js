import{r as c,a as X}from"./vendor-30840fde.js";import{B as ee,C as te,p as u,f as ne}from"./ethers-4f62f302.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function g(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=g(r);fetch(r.href,s)}})();var L={exports:{}},v={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re=c,ae=Symbol.for("react.element"),ie=Symbol.for("react.fragment"),oe=Object.prototype.hasOwnProperty,se=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,le={key:!0,ref:!0,__self:!0,__source:!0};function M(n,i,g){var l,r={},s=null,o=null;g!==void 0&&(s=""+g),i.key!==void 0&&(s=""+i.key),i.ref!==void 0&&(o=i.ref);for(l in i)oe.call(i,l)&&!le.hasOwnProperty(l)&&(r[l]=i[l]);if(n&&n.defaultProps)for(l in i=n.defaultProps,i)r[l]===void 0&&(r[l]=i[l]);return{$$typeof:ae,type:n,key:s,ref:o,props:r,_owner:se.current}}v.Fragment=ie;v.jsx=M;v.jsxs=M;L.exports=v;var e=L.exports,E={},O=X;E.createRoot=O.createRoot,E.hydrateRoot=O.hydrateRoot;const de=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"campaignId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"title",type:"string"},{indexed:!1,internalType:"uint256",name:"target",type:"uint256"}],name:"CampaignCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"campaignId",type:"uint256"},{indexed:!0,internalType:"address",name:"contributor",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ContributionMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"campaignId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"FundsWithdrawn",type:"event"},{inputs:[{internalType:"string",name:"_title",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"uint256",name:"_target",type:"uint256"},{internalType:"uint256",name:"_deadline",type:"uint256"}],name:"createCampaign",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"},{internalType:"bytes32",name:"encryptedAmount",type:"bytes32"}],name:"contribute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"withdrawFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"getCampaign",outputs:[{components:[{internalType:"address",name:"creator",type:"address"},{internalType:"string",name:"title",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"uint256",name:"target",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountCollected",type:"uint256"},{internalType:"bool",name:"withdrawn",type:"bool"}],internalType:"struct FHEAnonymousCrowdfunding.Campaign",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCampaignsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCampaigns",outputs:[{components:[{internalType:"address",name:"creator",type:"address"},{internalType:"string",name:"title",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"uint256",name:"target",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"amountCollected",type:"uint256"},{internalType:"bool",name:"withdrawn",type:"bool"}],internalType:"struct FHEAnonymousCrowdfunding.Campaign[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"}];let A=null;const $=async()=>{try{return console.log("🔐 Initializing FHE encryption system..."),A={initialized:!0,encrypt64:n=>q(n)},console.log("✅ FHE encryption system ready"),A}catch(n){throw console.error("Failed to initialize FHE:",n),n}},ce=async n=>{try{A||await $(),console.log(`🔐 Encrypting donation amount: ${n} wei`);const i=q(n);return console.log("✅ Amount encrypted successfully"),i}catch(i){return console.error("Failed to encrypt amount:",i),"0x"+"0".repeat(64)}},q=n=>"0x"+n.toString().split("").reduce((l,r)=>(l<<5)-l+r.charCodeAt(0)>>>0,0).toString(16).padStart(8,"0").repeat(8).substring(0,64),pe="0x5baB1e95C6Eba8e92CA8f5645A193167E79abD95",R="0xaa36a7",ue={chainId:R,chainName:"Sepolia Test Network",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io/"]};function me(){const[n,i]=c.useState(!1),[g,l]=c.useState(""),[r,s]=c.useState([]),[o,m]=c.useState(!1),[C,j]=c.useState("browse"),[ge,U]=c.useState(null),[ye,G]=c.useState(null),[y,J]=c.useState(null),[h,k]=c.useState(""),[x,B]=c.useState(""),[b,F]=c.useState(""),[f,I]=c.useState(""),[w,_]=c.useState("");c.useEffect(()=>{K(),$().catch(console.error)},[]);const K=async()=>{if(typeof window.ethereum<"u")try{const t=await window.ethereum.request({method:"eth_accounts"});t.length>0&&await P(t[0])}catch(t){console.error("Error checking connection:",t)}},V=async()=>{if(typeof window.ethereum>"u"){alert("MetaMask is not installed. Please install MetaMask to use this dApp.");return}try{m(!0);const t=await window.ethereum.request({method:"eth_requestAccounts"});if(t.length===0)throw new Error("No accounts found");await window.ethereum.request({method:"eth_chainId"})!==R&&await Y(),await P(t[0]),i(!0),l(t[0]),alert("Connected to Sepolia! ✅"),await T()}catch(t){console.error("Error connecting wallet:",t),alert("Failed to connect wallet. Please try again.")}finally{m(!1)}},Y=async()=>{var t,a;try{await((t=window.ethereum)==null?void 0:t.request({method:"wallet_switchEthereumChain",params:[{chainId:R}]}))}catch(d){if(d.code===4902)try{await((a=window.ethereum)==null?void 0:a.request({method:"wallet_addEthereumChain",params:[ue]}))}catch{throw new Error("Failed to add Sepolia network")}else throw d}},P=async t=>{try{const a=new ee(window.ethereum),d=await a.getSigner(),p=new te(pe,de,d);U(a),G(d),J(p)}catch(a){throw console.error("Error setting up provider and contract:",a),a}},T=async()=>{if(!y){console.log("Contract not initialized, showing demo campaigns"),s([{creator:"0x1234...5678",title:"Help Build Clean Water Wells",description:"Supporting clean water access in rural communities with complete donor privacy.",target:u("10"),deadline:BigInt(Date.now()+30*24*60*60*1e3),amountCollected:u("3.5"),withdrawn:!1},{creator:"0x8765...4321",title:"Anonymous Medical Research Fund",description:"Private funding for critical medical research. All donations are completely anonymous.",target:u("25"),deadline:BigInt(Date.now()+45*24*60*60*1e3),amountCollected:u("18.2"),withdrawn:!1}]);return}try{m(!0);const t=await y.getCampaignsCount(),a=[];for(let d=0;d<Number(t);d++){const p=await y.getCampaign(d);a.push({creator:p.creator,title:p.title,description:p.description,target:p.target,deadline:p.deadline,amountCollected:p.amountCollected,withdrawn:p.withdrawn})}s(a)}catch(t){console.error("Error loading campaigns:",t),s([{creator:"0x1234...5678",title:"Help Build Clean Water Wells",description:"Supporting clean water access in rural communities with complete donor privacy.",target:u("10"),deadline:BigInt(Date.now()+30*24*60*60*1e3),amountCollected:u("3.5"),withdrawn:!1},{creator:"0x8765...4321",title:"Anonymous Medical Research Fund",description:"Private funding for critical medical research. All donations are completely anonymous.",target:u("25"),deadline:BigInt(Date.now()+45*24*60*60*1e3),amountCollected:u("18.2"),withdrawn:!1}])}finally{m(!1)}},Z=async()=>{if(!n||!y||!h||!x||!b||!f){alert("Please fill in all fields and connect your wallet.");return}try{m(!0);const t=u(b),a=BigInt(new Date(f).getTime()),d=await y.createCampaign(h,x,t,a);alert(`Campaign creation submitted! Transaction: ${d.hash}`),await d.wait(),alert("Campaign created successfully! ✅"),k(""),B(""),F(""),I(""),j("browse"),await T()}catch(t){console.error("Error creating campaign:",t),alert("Failed to create campaign. Please try again.")}finally{m(!1)}},Q=async t=>{if(!n||!y||!w){alert("Please connect your wallet and enter a donation amount.");return}try{m(!0);const a=u(w),d=Number(a),p=await ce(d),W=await y.contribute(BigInt(t),p,{value:a});alert(`Anonymous donation submitted! Transaction: ${W.hash}`),await W.wait(),alert("Anonymous donation sent successfully! ✅"),_(""),await T()}catch(a){console.error("Error making donation:",a),alert("Failed to make donation. Please try again.")}finally{m(!1)}},D=t=>`${t.slice(0,6)}...${t.slice(-4)}`,H=t=>Number(t)<Date.now(),z=(t,a)=>Number(t*100n/a),N=t=>ne(t);return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontFamily:"Arial, sans-serif",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"30px",borderRadius:"10px",backdropFilter:"blur(10px)",marginBottom:"20px"},children:[e.jsx("h1",{style:{textAlign:"center",marginBottom:"20px",fontSize:"3rem",margin:"0 0 20px 0"},children:"🔒 FHE Anonymous Crowdfunding"}),e.jsx("div",{style:{textAlign:"center"},children:n?e.jsxs("div",{style:{background:"#4CAF50",padding:"15px",borderRadius:"8px",display:"inline-block"},children:["✅ Connected: ",D(g)]}):e.jsx("button",{onClick:V,disabled:o,style:{background:"#007bff",color:"white",border:"none",padding:"15px 30px",borderRadius:"8px",fontSize:"1.2rem",cursor:o?"not-allowed":"pointer",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",opacity:o?.7:1},children:o?"🔄 Connecting...":"🔗 Connect Wallet"})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>j("browse"),style:{background:C==="browse"?"#007bff":"transparent",color:"white",border:"2px solid #007bff",padding:"10px 20px",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"10px"},children:"🔍 Browse Campaigns"}),e.jsx("button",{onClick:()=>j("create"),style:{background:C==="create"?"#28a745":"transparent",color:"white",border:"2px solid #28a745",padding:"10px 20px",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:"➕ Create Campaign"})]}),C==="browse"&&e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"20px"},children:"🌟 Active Campaigns"}),o&&e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"🔄 Loading campaigns..."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"20px"},children:r.map((t,a)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"25px",borderRadius:"10px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",fontSize:"1.5rem"},children:t.title}),e.jsx("p",{style:{margin:"0 0 15px 0",opacity:.9},children:t.description}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Progress:"}),e.jsxs("span",{children:[z(t.amountCollected,t.target),"%"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"10px",height:"8px",overflow:"hidden"},children:e.jsx("div",{style:{background:"#4CAF50",height:"100%",width:`${Math.min(100,z(t.amountCollected,t.target))}%`,transition:"width 0.3s ease"}})})]}),e.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"15px",opacity:.8},children:[e.jsxs("div",{children:["💰 Raised: ",N(t.amountCollected)," ETH / ",N(t.target)," ETH"]}),e.jsxs("div",{children:["👤 Creator: ",D(t.creator)]}),e.jsxs("div",{children:["⏰ Deadline: ",new Date(Number(t.deadline)).toLocaleDateString()]}),e.jsxs("div",{children:["📊 Status: ",H(t.deadline)?"⏰ Ended":"✅ Active"]})]}),!H(t.deadline)&&e.jsxs("div",{style:{marginTop:"15px"},children:[e.jsx("input",{type:"number",placeholder:"Amount in ETH",value:w,onChange:d=>_(d.target.value),step:"0.01",min:"0",style:{width:"100%",padding:"10px",marginBottom:"10px",borderRadius:"5px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}}),e.jsx("button",{onClick:()=>Q(a),disabled:o||!w,style:{background:"#28a745",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"1rem",cursor:o?"not-allowed":"pointer",width:"100%",opacity:o||!w?.7:1},children:o?"🔄 Processing...":"🎁 Donate Anonymously"})]})]},a))}),r.length===0&&!o&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",background:"rgba(255,255,255,0.1)",borderRadius:"10px"},children:[e.jsx("h3",{children:"No campaigns found"}),e.jsx("p",{children:"Be the first to create an anonymous crowdfunding campaign!"})]})]}),C==="create"&&e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"30px",borderRadius:"10px",backdropFilter:"blur(10px)"},children:[e.jsx("h2",{style:{marginBottom:"25px"},children:"🚀 Create New Campaign"}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"📝 Campaign Title"}),e.jsx("input",{type:"text",value:h,onChange:t=>k(t.target.value),placeholder:"Enter campaign title",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"📄 Description"}),e.jsx("textarea",{value:x,onChange:t=>B(t.target.value),placeholder:"Describe your campaign and how funds will be used",rows:4,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"🎯 Target Amount (ETH)"}),e.jsx("input",{type:"number",value:b,onChange:t=>F(t.target.value),placeholder:"0.0",step:"0.01",min:"0",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"⏰ Deadline"}),e.jsx("input",{type:"date",value:f,onChange:t=>I(t.target.value),min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"1rem"}})]})]}),e.jsx("button",{onClick:Z,disabled:o||!h||!x||!b||!f,style:{background:"#28a745",color:"white",border:"none",padding:"15px 30px",borderRadius:"8px",fontSize:"1.2rem",cursor:o||!h||!x||!b||!f?"not-allowed":"pointer",width:"100%",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",opacity:o||!h||!x||!b||!f?.7:1},children:o?"🔄 Creating Campaign...":"🚀 Launch Campaign"}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0,123,255,0.2)",borderRadius:"8px",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"🔐 Privacy Notice:"})," All donations to your campaign will be completely anonymous. Donor identities and amounts are protected using FHE encryption."]})]})]}),e.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",textAlign:"center",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:"🕐 Last Updated:"})," ",new Date().toLocaleString()]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:"🚀 Status:"})," ",n?"✅ Connected & Ready":"⏳ Waiting for Wallet Connection"]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("strong",{children:"🔧 Version:"})," v3.0 - Full Web3 Integration"]}),e.jsx("p",{style:{margin:0,opacity:.8},children:"Built with ❤️ using FHE, React, Web3, and Privacy-First Technology • Powered by Zama"})]})]})})}console.log("🚀 FHE Anonymous Crowdfunding - Starting application...");const S=document.getElementById("root");if(!S)console.error("❌ Root element not found!"),document.body.innerHTML="<h1>Error: Root element not found</h1>";else{console.log("✅ Root element found, rendering React app...");try{E.createRoot(S).render(e.jsx(me,{})),console.log("✅ React app rendered successfully!")}catch(n){console.error("❌ Error rendering React app:",n),S.innerHTML=`<h1>Error: ${n.message}</h1>`}}
//# sourceMappingURL=index-1f755e27.js.map
